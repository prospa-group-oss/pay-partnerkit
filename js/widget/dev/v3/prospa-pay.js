!function(){var e=document.getElementById("prospa-pay"),t={},o={},a={term:13,weeklyServiceFee:2.95,establishmentFee:19.95,totalServiceFee:100,minPrice:500,maxPrice:2e4,modalContent:'<div id="prospa-pay-modal"><a href="#" class="prospa-pay-modal-overlay"></a><div class="prospa-pay-modal-dialog"><div class="prospa-pay-modal-content"><img src="https://partner-kit.prospa.com/assets/prospa-pay-how-it-works.png" width="100%"></div></div></div>',addToCartRegex:"add to cart|add-to-cart"},n={genericCopy:'<span id="prospa-pay-offer">Pay in {{config.term}} weekly offer instalments. <a id="prospa-pay-modal-link" href="#prospa-pay-modal" style="text-decoration:none; color:#38B973"><span id="prospa-pay-more-info">Prospa&nbsp;Pay&nbsp;for&nbsp;business.</span></a></span>',instalmentCopy:'<span id="prospa-pay-offer">or <span id="prospa-pay-instalment" style="font-weight:bolder">${{offer.instalment}} per week</span> <span id="prospa-pay-term">over {{config.term}}</span> weeks. <a id="prospa-pay-modal-link" href="#prospa-pay-modal" style="text-decoration:none; color:#38B973"><span id="prospa-pay-more-info">Prospa&nbsp;Pay&nbsp;for&nbsp;business.</span></a></span>'};function r(){if(e){o.id=e.getAttribute("partnerid"),o.name=e.getAttribute("partnername"),o.platform=e.getAttribute("partnerplatform"),t.name=e.getAttribute("itemname"),t.price=e.getAttribute("itemprice"),a.step=e.getAttribute("step");var r=new XMLHttpRequest;r.open("GET","https://partner-kit.prospa.com/js/widget/config/config.json",!0),r.onload=function(){if(r.status>=200&&r.status<400){try{customConfig=JSON.parse(r.responseText).global,customConfig&&(a.modalContent=customConfig.modalContent||a.modalContent,a.addToCartRegex=a.addToCartRegex.concat("|"+customConfig.addToCartRegex)||a.addToCartRegex,n.genericCopy=customConfig.genericCopy||n.genericCopy,n.instalmentCopy=customConfig.instalmentCopy||n.instalmentCopy)}catch(e){}try{customConfig=JSON.parse(r.responseText).partner.id[o.id],customConfig&&(a.term=customConfig.term||a.term,a.minPrice=customConfig.minPrice||a.minPrice,a.modalContent=customConfig.modalContent||a.modalContent,n.genericCopy=customConfig.genericCopy||n.genericCopy,n.instalmentCopy=customConfig.instalmentCopy||n.instalmentCopy,console.log(a.minPrice))}catch(e){}}!function(){switch(o.platform){case"shopify":t.price=t.price/100}}(),function(){if(t.price)if(t.price>=a.minPrice&&t.price<=a.maxPrice)t.price>2e3&&(a.establishmentFee=10*Math.floor(t.price/1e3)+9.95),n.instalment=((Number(t.price)+a.establishmentFee+a.totalServiceFee)/a.term).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");else if(t.price<a.minPrice||t.price>a.maxPrice)return void(n.shown=!1);e&&n.instalment?n.copy=n.instalmentCopy:e&&!n.instalment&&(n.copy=n.genericCopy);-1!==n.copy.search(/{{offer.instalment}}/i)&&(n.copy=n.copy.replace("{{offer.instalment}}",n.instalment));-1!==n.copy.search(/{{config.term}}/i)&&(n.copy=n.copy.replace("{{config.term}}",a.term));e.innerHTML=n.copy,n.shown=!0,document.body.insertAdjacentHTML("beforeend",a.modalContent),document.getElementById("prospa-pay").insertAdjacentHTML("beforebegin",'<style type="text/css">                                                               #prospa-pay{padding-top:10px;padding-bottom:10px}#prospa-pay-modal{position:fixed;top:0;bottom:0;left:0;right:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:100000;width:0;height:0;opacity:0}#prospa-pay-modal:target{width:auto;height:auto;opacity:1;transition:opacity .4s ease;z-index:100000}#prospa-pay-modal:target .prospa-pay-modal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;cursor:default;background-color:rgba(0,0,0,.72)}#prospa-pay-modal .prospa-pay-modal-dialog{position:absolute;margin:auto;top:0;right:0;bottom:0;left:0;max-width:710px;max-height:fit-content;overflow-y:auto;z-index:9999}#prospa-pay-modal .prospa-pay-modal-content{background-color:#fff}                                                            </style>');try{document.getElementById("prospa-pay-modal-link").addEventListener("click",function(){p("ProspaPay Offer Viewed")})}catch(e){}}(),"cart"==a.step?p("Cart Viewed"):p("Product Viewed")},r.onerror=function(){},r.send()}}!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var o=Array.prototype.slice.call(arguments);return o.unshift(t),e.push(o),e}};for(var t=0;t<e.methods.length;t++){var o=e.methods[t];e[o]=e.factory(o)}e.load=function(t,o){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n),e._loadOptions=o},e.SNIPPET_VERSION="4.1.0",e.load("UXoGCevr6fdRT3RDpt4OUAHOzNMZjoY8"),e.page()}}();var i=document.createElement("script");function p(t){analytics.track(t,{instalmentPrice:n.instalment,numberInstalments:a.term,offerCopy:e.innerText,offerMarkup:n.copy,offerDisplayed:n.shown,productName:e.getAttribute("itemname"),productPrice:e.getAttribute("itemprice"),url:document.URL,store:e.getAttribute("partnername"),platform:e.getAttribute("partnerplatform"),numberOfItems:e.getAttribute("cartitems"),step:e.getAttribute("step")})}i.src="https://cdn.optimizely.com/js/11051390851.js",document.head.appendChild(i),function(){if(e){if(r(),"woocommerce"==o.platform)try{jQuery(document.body).on("updated_cart_totals",function(){showProspaPay()})}catch(e){}document.addEventListener("DOMContentLoaded",function(e){!function(){for(var e=document.querySelectorAll('button[type="button"],button[type="submit"]'),t=new RegExp(a.addToCartRegex,"i"),o=0;o<e.length;o++)if(-1!==e[o].innerText.search(t)){e[o].addEventListener("click",function(){p("Added To Cart")});break}}()})}}()}();